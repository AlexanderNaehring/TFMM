; Form Designer for Purebasic - 5.30
; Warning: this file uses a strict syntax, if you edit it, make sure to respect the Form Designer limitation or it won't be opened again.

;
; This code is automatically generated by the FormDesigner.
; Manual modification is possible to adjust existing commands, but anything else will be dropped when the code is compiled.
; Event procedures needs to be put in another source file.
;

Global WindowSettings

Global GadgetPath, GadgetButtonAutodetect, GadgetButtonBrowse, GadgetFrame, GadgetRights, GadgetSettingsInfo, GadgetOpenPath, GadgetSaveSettings, GadgetCancelSettings, GadgetSettingsWindowLocation, GadgetSettingsAutomaticUpdate

Declare ResizeGadgetsWindowSettings()

Declare GadgetCloseSettings(EventType)
Declare GadgetSaveSettings(EventType)
Declare GadgetButtonOpenPath(EventType)
Declare GadgetButtonAutodetect(EventType)
Declare GadgetButtonBrowse(EventType)

Procedure OpenWindowSettings(x = 0, y = 0, width = 520, height = 210)
  WindowSettings = OpenWindow(#PB_Any, x, y, width, height, "TFMM Settings", #PB_Window_SystemMenu | #PB_Window_ScreenCentered, WindowID(WindowMain))
  HideWindow(WindowSettings, 1)
  GadgetPath = StringGadget(#PB_Any, 20, 70, 300, 25, "[Train Fever Path]")
  GadgetButtonAutodetect = ButtonGadget(#PB_Any, 420, 70, 80, 25, "Autodetect")
  GadgetToolTip(GadgetButtonAutodetect, "Try to read the install location of Train Fever.")
  GadgetButtonBrowse = ButtonGadget(#PB_Any, 330, 70, 80, 25, "Browse")
  GadgetToolTip(GadgetButtonBrowse, "Browse manually for the install location of Train Fever")
  GadgetFrame = FrameGadget(#PB_Any, 10, 10, 500, 130, "Train Fever Path")
  GadgetRights = TextGadget(#PB_Any, 20, 105, 430, 20, "")
  GadgetSettingsInfo = TextGadget(#PB_Any, 20, 30, 480, 35, "All installed mods will be handled for each installation separately."+#CRLF$+"Please make sure that TFMM has the required rights to write to the game directory.")
  GadgetOpenPath = ButtonGadget(#PB_Any, 460, 100, 40, 25, "Open")
  GadgetToolTip(GadgetOpenPath, "Open specified folder")
  GadgetSaveSettings = ButtonGadget(#PB_Any, 420, 180, 90, 25, "Save")
  GadgetToolTip(GadgetSaveSettings, "Save settings and close this dialog")
  GadgetCancelSettings = ButtonGadget(#PB_Any, 320, 180, 90, 25, "Cancel")
  GadgetToolTip(GadgetCancelSettings, "Drop changes and close this dialog")
  GadgetSettingsWindowLocation = CheckBoxGadget(#PB_Any, 10, 150, 280, 25, "Restore TFMM window position upon next start")
  GadgetToolTip(GadgetSettingsWindowLocation, "Remember the window location and restore upon next start.")
  GadgetSettingsAutomaticUpdate = CheckBoxGadget(#PB_Any, 10, 180, 280, 25, "Automatically check for TFMM updates")
  GadgetToolTip(GadgetSettingsAutomaticUpdate, "TFMM will automatically check for new versions. If not checked, please make sure you always use the newest version by visiting train-fever.net.")
EndProcedure

Procedure ResizeGadgetsWindowSettings()
  Protected FormWindowWidth, FormWindowHeight
  FormWindowWidth = WindowWidth(WindowSettings)
  FormWindowHeight = WindowHeight(WindowSettings)
  ResizeGadget(GadgetPath, 20, 70, FormWindowWidth - 220, 25)
  ResizeGadget(GadgetButtonAutodetect, FormWindowWidth - 100, 70, 80, 25)
  ResizeGadget(GadgetButtonBrowse, FormWindowWidth - 190, 70, 80, 25)
EndProcedure

Procedure WindowSettings_Events(event)
  Select event
    Case #PB_Event_SizeWindow
      ResizeGadgetsWindowSettings()
    Case #PB_Event_CloseWindow
      ProcedureReturn #False

    Case #PB_Event_Menu
      Select EventMenu()
      EndSelect

    Case #PB_Event_Gadget
      Select EventGadget()
        Case GadgetButtonAutodetect
          GadgetButtonAutodetect(EventType())          
        Case GadgetButtonBrowse
          GadgetButtonBrowse(EventType())          
        Case GadgetOpenPath
          GadgetButtonOpenPath(EventType())          
        Case GadgetSaveSettings
          GadgetSaveSettings(EventType())          
        Case GadgetCancelSettings
          GadgetCloseSettings(EventType())          
      EndSelect
  EndSelect
  ProcedureReturn #True
EndProcedure

