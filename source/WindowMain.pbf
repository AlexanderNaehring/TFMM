;
; This code is automatically generated by the FormDesigner.
; Manual modification is possible to adjust existing commands, but anything else will be dropped when the code is compiled.
; Event procedures needs to be put in another source file.
;

Global WindowMain

Global GadgetPanel, GadgetStartGame, GadgetHomepage, GadgetNewMod, GadgetUninstall, GadgetToggle, ListInstalled, ListSaves, GadgetStartGame2, ButtonDeleteSave

Enumeration FormMenu
  #MenuItem_Settings
  #MenuItem_Update
  #MenuItem_AddMod
  #MenuItem_Close
EndEnumeration

Declare ResizeGadgetsWindowMain()

Declare exit(Event)
Declare MenuItemSettings(Event)
Declare GadgetNewMod(Event)
Declare MenuItemUpdate(Event)
Declare GadgetButtonUninstall(EventType)
Declare MenuItemUpdate(EventType)
Declare GadgetListInstalled(EventType)
Declare GadgetNewMod(EventType)
Declare GadgetButtonStartGame(EventType)
Declare GadgetButtonToggle(EventType)

Procedure OpenWindowMain(x = 0, y = 0, width = 720, height = 480)
  WindowMain = OpenWindow(#PB_Any, x, y, width, height, "Train Fever Mod Manager", #PB_Window_SystemMenu | #PB_Window_MinimizeGadget | #PB_Window_MaximizeGadget | #PB_Window_SizeGadget | #PB_Window_TitleBar | #PB_Window_ScreenCentered)
  AddKeyboardShortcut(WindowMain, #PB_Shortcut_Control | #PB_Shortcut_S, #MenuItem_Settings)
  AddKeyboardShortcut(WindowMain, #PB_Shortcut_Control | #PB_Shortcut_O, #MenuItem_AddMod)
  AddKeyboardShortcut(WindowMain, #PB_Shortcut_Alt | #PB_Shortcut_F4, #MenuItem_Close)

  CreateStatusBar(0, WindowID(WindowMain))
  AddStatusBarField(640)
  StatusBarText(0, 0, "[TF Path]")
  CreateMenu(0, WindowID(WindowMain))
  MenuTitle("File")
  MenuItem(#MenuItem_Settings, "&Settings" + Chr(9) + "Ctrl + S")
  MenuItem(#MenuItem_Update, "&Homepage")
  MenuBar()
  MenuItem(#MenuItem_AddMod, "&Add Modification" + Chr(9) + "Ctrl + O")
  MenuBar()
  MenuItem(#MenuItem_Close, "&Close" + Chr(9) + "Alt + F4")
  GadgetPanel = PanelGadget(#PB_Any, 0, 0, 720, 435)
  AddGadgetItem(GadgetPanel, -1, "Modifications")
  GadgetStartGame = ButtonGadget(#PB_Any, 230, 380, 260, 25, "Start Train Fever", #PB_Button_Default)
  GadgetHomepage = ButtonGadget(#PB_Any, 120, 380, 100, 25, "Download Mods")
  GadgetNewMod = ButtonGadget(#PB_Any, 10, 380, 100, 25, "New Mod", #PB_Button_Toggle)
  GadgetToolTip(GadgetNewMod, "Add new modification")
  GadgetUninstall = ButtonGadget(#PB_Any, 610, 380, 100, 25, "Uninstall Mod")
  GadgetToolTip(GadgetUninstall, "Uninstall selected modification")
  GadgetToggle = ButtonGadget(#PB_Any, 500, 380, 100, 25, "Activate Mod", #PB_Button_Toggle)
  GadgetToolTip(GadgetToggle, "Activate selected modification")
  ListInstalled = ListIconGadget(#PB_Any, 0, -2, 720, 370, "Name", 250, #PB_ListIcon_FullRowSelect | #PB_ListIcon_AlwaysShowSelection)
  AddGadgetColumn(ListInstalled, 1, "Author", 100)
  AddGadgetColumn(ListInstalled, 2, "Version", 60)
  AddGadgetColumn(ListInstalled, 3, "Size", 60)
  AddGadgetColumn(ListInstalled, 4, "Activated", 60)
  AddGadgetItem(GadgetPanel, -1, "Save Games")
  ListSaves = ListIconGadget(#PB_Any, 0, 0, 720, 370, "Savegame", 100)
  GadgetStartGame2 = ButtonGadget(#PB_Any, 230, 380, 260, 25, "Start Train Fever", #PB_Button_Default)
  ButtonDeleteSave = ButtonGadget(#PB_Any, 610, 380, 100, 25, "Delete Savegame")
  GadgetToolTip(ButtonDeleteSave, "This will forever delete all selected save games")
  CloseGadgetList()
EndProcedure

Procedure ResizeGadgetsWindowMain()
  Protected FormWindowWidth, FormWindowHeight
  FormWindowWidth = WindowWidth(WindowMain)
  FormWindowHeight = WindowHeight(WindowMain)
  ResizeGadget(GadgetPanel, 0, 0, FormWindowWidth - 0, FormWindowHeight - MenuHeight() - StatusBarHeight(0) - 0)
  ResizeGadget(GadgetStartGame, 230, GetGadgetAttribute(GadgetPanel,#PB_Panel_ItemHeight) - 33, GetGadgetAttribute(GadgetPanel,#PB_Panel_ItemWidth) - 460, 25)
  ResizeGadget(GadgetHomepage, 120, GetGadgetAttribute(GadgetPanel,#PB_Panel_ItemHeight) - 33, 100, 25)
  ResizeGadget(GadgetNewMod, 10, GetGadgetAttribute(GadgetPanel,#PB_Panel_ItemHeight) - 33, 100, 25)
  ResizeGadget(GadgetUninstall, GetGadgetAttribute(GadgetPanel,#PB_Panel_ItemWidth) - 110, GetGadgetAttribute(GadgetPanel,#PB_Panel_ItemHeight) - 33, 100, 25)
  ResizeGadget(GadgetToggle, GetGadgetAttribute(GadgetPanel,#PB_Panel_ItemWidth) - 220, GetGadgetAttribute(GadgetPanel,#PB_Panel_ItemHeight) - 33, 100, 25)
  ResizeGadget(ListInstalled, 0, -2, GetGadgetAttribute(GadgetPanel,#PB_Panel_ItemWidth) - 0, GetGadgetAttribute(GadgetPanel,#PB_Panel_ItemHeight) - 43)
  ResizeGadget(ListSaves, 0, 0, GetGadgetAttribute(GadgetPanel,#PB_Panel_ItemWidth) - 0, GetGadgetAttribute(GadgetPanel,#PB_Panel_ItemHeight) - 43)
  ResizeGadget(GadgetStartGame2, 230, GetGadgetAttribute(GadgetPanel,#PB_Panel_ItemHeight) - 33, GetGadgetAttribute(GadgetPanel,#PB_Panel_ItemWidth) - 460, 25)
  ResizeGadget(ButtonDeleteSave, GetGadgetAttribute(GadgetPanel,#PB_Panel_ItemWidth) - 110, GetGadgetAttribute(GadgetPanel,#PB_Panel_ItemHeight) - 33, 100, 25)
EndProcedure

Procedure WindowMain_Events(event)
  Select event
    Case #PB_Event_SizeWindow
      ResizeGadgetsWindowMain()
    Case #PB_Event_CloseWindow
      ProcedureReturn #False

    Case #PB_Event_Menu
      Select EventMenu()
        Case #MenuItem_Settings
          MenuItemSettings(EventMenu())
        Case #MenuItem_Update
          MenuItemUpdate(EventMenu())
        Case #MenuItem_AddMod
          GadgetNewMod(EventMenu())
        Case #MenuItem_Close
          exit(EventMenu())
      EndSelect

    Case #PB_Event_Gadget
      Select EventGadget()
        Case GadgetStartGame
          GadgetButtonStartGame(EventType())          
        Case GadgetHomepage
          MenuItemUpdate(EventType())          
        Case GadgetNewMod
          GadgetNewMod(EventType())          
        Case GadgetUninstall
          GadgetButtonUninstall(EventType())          
        Case GadgetToggle
          GadgetButtonToggle(EventType())          
        Case ListInstalled
          GadgetListInstalled(EventType())          
        Case GadgetStartGame2
          GadgetButtonStartGame(EventType())          
      EndSelect
  EndSelect
  ProcedureReturn #True
EndProcedure


; IDE Options = PureBasic 5.30 (Windows - x64)
; CursorPosition = 31
; FirstLine = 6
; Folding = -
; EnableUnicode
; EnableXP